# qcinput

`qcinput` is a CLI tool that reads an `xyz` or `gjf` geometry, loads task type and keywords
from TOML, and writes an ORCA or Gaussian input file.

## Install With pip

```bash
pip install qcinput
```

For development (from source):

```bash
pip install -e .
```

## Usage

```bash
qcinput generate <path/to/structure.xyz|.gjf> [-c|--config <path/to/qcinput.toml>] [-o output.inp]
```

Compatibility shorthand (same behavior):

```bash
qcinput <path/to/structure.xyz|.gjf> [-c|--config <path/to/qcinput.toml>] [-o output.inp]
```

Show version:

```bash
qcinput --version
qcinput -V
```

First-time setup:

```bash
qcinput init-config
qcinput init-config --kind int
qcinput init-config --kind ts
qcinput init-config --kind sp
```

Default config path:

```text
./qcinput.toml
```

You can override this with:

```bash
QCINPUT_CONFIG=/path/to/config.toml qcinput water.xyz
```

Example:

```bash
qcinput water.xyz -c qcinput.toml -o water_opt.inp
```

For ORCA and Gaussian, `kind = "ts"` now uses a two-step TS template.
Use:

```bash
qcinput water.xyz -c qcinput.toml -o water_ts.inp
```

ORCA TS settings:

```toml
[orca.task.ts]
step1_keywords = ["Opt"]
step2_keywords = ["OptTS", "Freq"]
constraint_atoms = [[0, 1], [2, 3]]
step1_nprocs = 36
step1_maxcore = 3555
step2_nprocs = 16
step2_maxcore = 8000
calc_hess = true
```

`constraint_atoms` accepts either one pair (`[0, 1]`) or multiple pairs
(`[[0, 1], [2, 3], ...]`).

Gaussian TS settings (`Link1`):

```toml
[gaussian.task.ts]
step1_route = ["Opt=ModRedundant"]
constraint_atoms = [[0, 1], [2, 3]]
step2_route = ["Opt=(TS,CalcFC,NoEigenTest,NoFreeze)", "Freq", "Geom=AllCheck", "Guess=Read"]
```

`constraint_atoms` accepts one pair (`[0, 1]`) or multiple pairs
(`[[0, 1], [2, 3], ...]`) and will be converted to `B i j F` lines.
Legacy `modredundant` is still supported for compatibility.
`%chk` is auto-generated as `<structure_stem>.chk` (e.g. `water.xyz -> water.chk`).
This applies to Gaussian `int`, `sp`, and `ts`.

When `qcinput.engine = "gaussian"`, default output suffix is `.gjf`.

## Config Format (TOML)

We use TOML because it is readable for humans, easy to version control, and strongly structured.

```toml
[qcinput]
engine = "orca" # or "gaussian"
kind = "int" # int | ts | sp

[molecule]
charge = 0
multiplicity = 1

[orca]
nprocs = 8
maxcore = 4000
base_keywords = ["r2scan-3c", "D4", "def2-mTZVPP"]
extra_keywords = ["TightSCF", "NormalSCF"] # optional, appended at end
smd = false # optional
smd_solvent = "toluene"

[orca.task.int]
keywords = ["Opt", "Freq"]

[gaussian]
nprocshared = 8
mem = "8GB"
method_basis = "B3LYP/def2TZVP"
extra_keywords = ["SCF=Tight"] # optional, appended at end of route

[gaussian.task.int]
route = ["Opt", "Freq"]
```

## Output Snippet

```text
# Generated by qcinput v<version> (https://github.com/yushengyangchem/qcinput)
! Opt Freq r2scan-3c D4 def2-mTZVPP
%pal nprocs 8 end
%maxcore 4000
* xyz 0 1
O 0.000000 0.000000 0.000000
H 0.757000 0.586000 0.000000
H -0.757000 0.586000 0.000000
*
```
